# yaml-language-server: $schema=https://azuresdkreleasepreview.blob.core.windows.net/azd/schema/azure.yaml.json

name: modern-csharp-web
metadata:
  template: modern-csharp-web@0.0.1-beta
hooks:
  preprovision:
    posix:
      interactive: true
      shell: sh
      run: ./infra/scripts/preprovision/validate-params.sh && ./infra/scripts/preprovision/whats-my-ip.sh
    windows:
      interactive: true
      shell: pwsh
      run: ./infra/scripts/preprovision/validate-params.ps1 && ./infra/scripts/preprovision/whats-my-ip.ps1
  predown:
    posix:
      interactive: true
      run: ./infra/scripts/predown/cleanup.sh
    windows:
      interactive: true
      run: ./infra/scripts/predown/cleanup.ps1
services:
  web-callcenter-service:
    project: src/Relecloud.Web.CallCenter.Api
    language: csharp
    host: appservice
  web-callcenter-frontend:
    project: src/Relecloud.Web.CallCenter
    language: csharp
    host: appservice
  rendering-service:
    project: src/Relecloud.TicketRenderer
    language: dotnet
    host: containerapp
    docker:
      # These paths are relative to the project directory
      path: ./Dockerfile
      context: ./../
