# yaml-language-server: $schema=https://azuresdkreleasepreview.blob.core.windows.net/azd/schema/azure.yaml.json

name: modern-csharp-web
metadata:
  template: modern-csharp-web@0.0.1-beta
services:
  web-call-center:
    project: src/Relecloud.Web.CallCenter
    language: csharp
    host: appservice
  web-public:
    project: src/Relecloud.Web.Public
    language: csharp
    host: appservice
  public-api:
    project: src/Relecloud.Web.Public.Api
    language: csharp
    host: appservice
    hooks:
      predeploy:
        posix:
          shell: sh
          interactive: true
          # executes in the context of the root folder
          run: ../../infra/devOpsScripts/configureLoadTest.sh
        windows: 
          shell: pwsh
          interactive: true
          # executes in the context of the project folder
          run: ../../infra/devOpsScripts/configureLoadTest.ps1
  call-center-api:
    project: src/Relecloud.Web.CallCenter.Api
    language: csharp
    host: appservice
