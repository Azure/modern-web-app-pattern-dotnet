# Set up Azure AD B2C App Registrations

> Work in progress: This document will describe the configurations necessary to set up Azure AD B2C app registrations to ensure that we can run

1. Use the Azure Portal to create or access an Azure AD B2C test org
1. Create a SignInSignUp Policy
1. Create a Signout Policy
1. Create an Azure AD B2C App Registration for a public facing web api
1. Export the App Registration settings for the web api from Azure AD portal into Key Vault
1. Create an Azure AD B2C App Registration for a front-end facing web app
1. Export the App Registration settings for the front-end web app from Azure AD portal into Key Vault

## Confirming this step

<!-- TODO provide validation script to ensure that the deployment will succeed -->

1. You have created, or have access, to a Key Vault where the Azure AD B2C settings are stored
1. The name of the Azure Key Vault with these configurations is set as an AZD environment variable `AZURE_OPS_VAULT_NAME`
1. The following values have been setup
    <!-- these AADB2C settings are also documented in the template. Please keep both locations in sync -->
    1. `frontEndAzureAdB2CApiScope` - A scope used by the front-end public web app to get authorized access to the public web api. Looks similar to https://myb2ctestorg.onmicrosoft.com/fbb6ce3b-c65f-4708-ae94-5069d1f821b4/Attendee
    1. `frontEndAzureAdB2cClientId` - A unique identifier of the public facing front-end web app
    1. `frontEndAzureAdB2cClientSecret` - A secret generated by Azure AD B2C so that your web app can establish trust with Azure AD B2C
    1. `apiAzureAdB2cClientId` - A unique identifier of the public facing API web app
    1. `azureAdB2cDomain` - The domain for the Azure B2C tenant: e.g. myb2ctestorg.onmicrosoft.com
    1. `azureAdB2cInstance` - The url for the Azure B2C tenant: e.g. https://myb2ctestorg.b2clogin.com
    1. `azureAdB2cTenantId` - A  unique identifier of the Azure AD B2C tenant
    1. `azureAdB2cSignupSigninPolicyId` - An Azure AD B2C flow that defines behaviors relating to user sign-up and sign-in. Also known as an Azure AD B2C user flow
    1. `azureAdB2cResetPolicyId` - An Azure AD B2C flow that enables users to reset their passwords. Also known as an Azure AD B2C user flow.
    1. `azureAdB2cSignoutCallback` - A URL provided by your web app that will clear session info when a user signs out